var ar=0;getAspectRatio(),window.addEventListener("resize",getAspectRatio);var score=0,scoreElem=document.getElementById("score"),gameOver=new Event("gameOver"),inhibiter=!1,pauseVector=[],horizontal=50,horizontalChange=0,vertical=50*ar,verticalChange=0,player=document.getElementById("player"),horizontalArc=[],verticalArc=[],targetHori=Math.round(100*Math.random()),target=document.getElementById("target"),targetVert=Math.round(Math.random()*(47.5*ar));function getAspectRatio(){var e=window.innerWidth,t=window.innerHeight;ar=t/e,console.log("Detected aspect ratio: "+ar)}document.addEventListener("keydown",(function(e){switch(e.code){case"ArrowRight":-2==horizontalChange||inhibiter||(horizontalChange=2,verticalChange=0);break;case"ArrowLeft":2==horizontalChange||inhibiter||(horizontalChange=-2,verticalChange=0);break;case"ArrowUp":2==verticalChange||inhibiter||(horizontalChange=0,verticalChange=-2);break;case"ArrowDown":-2==verticalChange||inhibiter||(horizontalChange=0,verticalChange=2);break;case"KeyP":inhibiter?(horizontalChange=pauseVector[0],verticalChangeChange=pauseVector[1],inhibiter=!1):(pauseVector=[horizontalChange,verticalChange],horizontalChange=0,verticalChange=0,inhibiter=!0)}})),setInterval((function(){if(horizontal+=horizontalChange,vertical+=verticalChange,player.style.top=vertical+"vw",player.style.left=horizontal+"vw",(horizontal<0||horizontal>100||vertical<0||vertical>100*ar)&&document.dispatchEvent(gameOver),target.style.top=targetVert+"vw",target.style.left=targetHori+"vw",horizontal-2<targetHori&&horizontal+2>targetHori&&vertical+2>targetVert&&vertical-2<targetVert){targetHori=2*Math.floor(50*Math.random()),targetVert=2*Math.floor(50*Math.random())*ar,score+=1,scoreElem.innerText=score,console.log("Score: "+score);var e=document.createElement("div");e.classList.add("playersegment"),e.setAttribute("id","player_seg"+(score-1)),document.body.appendChild(e)}inhibiter||(horizontalArc.unshift(horizontal),verticalArc.unshift(vertical));for(let e=0;e<score;e++)document.getElementById("player_seg"+e).style.left=horizontalArc[e+1]+"vw",document.getElementById("player_seg"+e).style.top=verticalArc[e+1]+"vw";horizontalArc.length>score&&horizontalArc.pop(),verticalArc.length>score&&verticalArc.pop();for(let e=0;e<=score;e++)0==horizontalChange&&0==verticalChange||vertical!=verticalArc[e+1]||horizontal!=horizontalArc[e+1]||document.dispatchEvent(gameOver)}),100),document.getElementById("reset").addEventListener("click",(()=>{var e=horizontalArc.length;inhibiter=!1;for(let t=0;t<=e;t++)horizontalArc.pop(),verticalArc.pop();document.getElementById("gameOver").style.display="none",getAspectRatio(),console.log("Game restarted!")})),document.addEventListener("gameOver",(e=>{document.getElementById("finalScore").innerText=score,document.getElementById("gameOver").style.display="block",horizontal=50,vertical=50*ar,horizontalChange=0,verticalChange=0,horizontal=50,scoreElem.innerText=0,inhibiter=!0,vertical=50*ar;var t=document.getElementsByClassName("playersegment");for(let e=0;e<t.length;e++)t[e].remove(),e--;score=0}));